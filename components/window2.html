<!-- components/window2.html -->
<div id="window2" class="window window2" style="left:0; top:0; width:700px; border:none; box-shadow:none;">
  <!-- 배경 이미지 -->
  <img src="../img/window2/bdimg.png" alt="window2 background" class="win2-bg" draggable="false">

  <!-- 문 영역 -->
  <div class="win2-doors">
    <img src="../img/window2/door_1.png" class="door" id="door1" draggable="false">
    <img src="../img/window2/door_2.png" class="door" id="door2" draggable="false">
    <img src="../img/window2/door_3.png" class="door" id="door3" draggable="false">
    <img src="../img/window2/door_4.png" class="door" id="door4" draggable="false">
  </div>

  <!-- 팝업 -->
  <div class="popup" id="popup1">
    <img src="../img/window2/popup_1.png" draggable="false">
    <div class="popup-close" data-popup="1"></div>
  </div>
  <div class="popup" id="popup2">
    <img src="../img/window2/popup_2.png" draggable="false">
    <div class="popup-close" data-popup="2"></div>
  </div>
  <div class="popup" id="popup3">
    <img src="../img/window2/popup_3.png" draggable="false">
    <div class="popup-close" data-popup="3"></div>
  </div>
  <div class="popup" id="popup4">
    <img src="../img/window2/popup_4.png" draggable="false">
    <div class="popup-close" data-popup="4"></div>
  </div>

  <!-- 퍼즐 조각 획득 팝업 -->
  <div class="pzpop" id="pzpop1">
    <img src="../img/window2/pzpop_1.png" draggable="false">
    <div class="pz-close" data-pz="1"></div>
  </div>
  <div class="pzpop" id="pzpop2">
    <img src="../img/window2/pzpop_2.png" draggable="false">
    <div class="pz-close" data-pz="2"></div>
  </div>
  <div class="pzpop" id="pzpop3">
    <img src="../img/window2/pzpop_3.png" draggable="false">
    <div class="pz-close" data-pz="3"></div>
  </div>
  <div class="pzpop" id="pzpop4">
    <img src="../img/window2/pzpop_4.png" draggable="false">
    <div class="pz-close" data-pz="4"></div>
  </div>

  <style>
    /* ---- window2 스타일 ---- */
    #window2 { position: relative; overflow: hidden; }

    .win2-bg {
      width: 100%; height: auto; display: block; user-select: none;
    }

    .win2-doors {
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%;
    }

    .door {
      position: absolute;
      cursor: pointer;
      transition: transform 0.4s ease;
      transform-origin: left center;
    }

    .door:hover { transform: scale(1.05); }
    .door.open { transform: rotateY(-25deg); }

    /* 문 위치 */
    #door1 { left: 90px; top: 180px; width: 150px; }
    #door2 { left: 230px; top: 200px; width: 170px; }
    #door3 { left: 380px; top: 120px; width: 170px; }
    #door4 { left: 530px; top: 230px; width: 150px; }

    /* ---- 팝업 ---- */
    .popup,
    .pzpop {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%) scale(0);
      transition: transform 0.4s ease, opacity 0.3s ease;
      opacity: 0; z-index: 10;
    }

    .popup img, .pzpop img {
      width: 400px; height: auto;
      display: block;
      pointer-events: none;
    }

    .popup.show, .pzpop.show {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }

    /* 닫기 클릭 감지 영역 */
    .popup-close,
    .pz-close {
      position: absolute;
      top: 15px; right: 15px;
      width: 40px; height: 40px;
      cursor: pointer;
      background: transparent;
    }

    .pzpop { z-index: 20; } /* 퍼즐 팝업이 위에 뜨도록 */
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const doors = document.querySelectorAll('#window2 .door');
      const popupCloses = document.querySelectorAll('#window2 .popup-close');
      const pzCloses = document.querySelectorAll('#window2 .pz-close');

      // 문 클릭 → 문 열리고 해당 팝업 열기
      doors.forEach((door, index) => {
        door.addEventListener('click', () => {
          door.classList.add('open');
          const popup = document.getElementById(`popup${index + 1}`);
          popup.classList.add('show');
        });
      });

      // 팝업 X 클릭 → 팝업 닫기 + 퍼즐 팝업 열기
      popupCloses.forEach(area => {
        area.addEventListener('click', () => {
          const num = area.dataset.popup;
          const popup = document.getElementById(`popup${num}`);
          const pz = document.getElementById(`pzpop${num}`);

          popup.classList.remove('show');
          pz.classList.add('show');
        });
      });

      // 퍼즐 팝업 X 클릭 → window2 전체 닫기
      pzCloses.forEach(area => {
        area.addEventListener('click', () => {
          const num = area.dataset.pz;
          const window2 = document.getElementById('window2');
          window2.remove();
          console.log(`퍼즐 조각 ${num} 획득! window2 닫힘.`);
        });
      });
    });
  </script>
</div>
